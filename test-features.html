<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test New Features</title>
    <script src="https://unpkg.com/react@18.3.1/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Test search functionality
        const TestSearchComponent = () => {
            const [searchTerm, setSearchTerm] = useState('');
            const [showDropdown, setShowDropdown] = useState(false);
            
            const testPatients = [
                { usn: 'USN001', fullName: 'John Doe', age: 35, gender: 'Male', phone: '1234567890' },
                { usn: 'USN002', fullName: 'Jane Smith', age: 28, gender: 'Female', phone: '0987654321' },
                { usn: 'USN003', fullName: 'Bob Johnson', age: 42, gender: 'Male', phone: '5555555555' }
            ];

            const filteredPatients = testPatients.filter(patient => {
                if (!searchTerm) return true;
                const searchLower = searchTerm.toLowerCase();
                return (
                    patient.fullName.toLowerCase().includes(searchLower) ||
                    patient.usn.toLowerCase().includes(searchLower) ||
                    (patient.phone && patient.phone.includes(searchLower))
                );
            });

            const handleSearch = (e) => {
                const value = e.target.value;
                setSearchTerm(value);
                setShowDropdown(value.length > 0);
            };

            const selectPatient = (patient) => {
                setSearchTerm(`${patient.usn} - ${patient.fullName}`);
                setShowDropdown(false);
                alert(`Selected: ${patient.fullName} (${patient.usn})`);
            };

            return (
                <div className="max-w-md mx-auto mt-8">
                    <h2 className="text-xl font-semibold mb-4">Test Patient Search</h2>
                    <div className="relative">
                        <input
                            type="text"
                            value={searchTerm}
                            onChange={handleSearch}
                            placeholder="Type to search patients by name, USN, or phone..."
                            className="w-full p-3 border border-gray-300 rounded-md pr-10"
                            onFocus={() => setShowDropdown(searchTerm.length > 0)}
                        />
                        <div className="absolute right-3 top-1/2 transform -translate-y-1/2">
                            <svg className="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </div>
                        
                        {showDropdown && filteredPatients.length > 0 && (
                            <div className="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto">
                                {filteredPatients.map(patient => (
                                    <div
                                        key={patient.usn}
                                        onClick={() => selectPatient(patient)}
                                        className="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"
                                    >
                                        <div className="font-medium text-gray-900">{patient.fullName}</div>
                                        <div className="text-sm text-gray-600">
                                            USN: {patient.usn} • {patient.age} years, {patient.gender}
                                            {patient.phone && ` • ${patient.phone}`}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Test dynamic copyright
        const TestCopyright = () => {
            const currentYear = new Date().getFullYear();
            
            return (
                <div className="max-w-md mx-auto mt-8 p-6 border rounded-lg">
                    <h2 className="text-xl font-semibold mb-4">Test Dynamic Copyright</h2>
                    <div className="text-center">
                        <p className="text-gray-600 text-sm">
                            © {currentYear} <strong>Hospital Management Information System (HMIS)</strong> - LeadOnyx Apex LLP
                        </p>
                        <p className="text-gray-500 text-xs mt-2">
                            Current year is dynamically generated: {currentYear}
                        </p>
                    </div>
                </div>
            );
        };

        const App = () => {
            return (
                <div className="min-h-screen bg-gray-50 py-8">
                    <div className="container mx-auto px-4">
                        <h1 className="text-3xl font-bold text-center mb-8">HMIS New Features Test</h1>
                        <TestSearchComponent />
                        <TestCopyright />
                        
                        <div className="max-w-md mx-auto mt-8 p-6 bg-green-50 border border-green-200 rounded-lg">
                            <h3 className="text-lg font-semibold text-green-800 mb-2">✅ Features Implemented</h3>
                            <ul className="text-green-700 text-sm space-y-1">
                                <li>• Searchable patient selection in prescription tab</li>
                                <li>• Type-to-search functionality with dropdown</li>
                                <li>• Search by name, USN, or phone number</li>
                                <li>• Dynamic copyright year timestamp</li>
                                <li>• Traditional dropdown fallback option</li>
                                <li>• Enhanced user experience</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
